# Story 5.1: Review Creation (Text Only)

## Status
Ready for Implementation

## Story
**As a** guest who completed a stay,
**I want** to write a review about my experience,
**so that** I can help future guests make informed decisions and provide feedback to the host.

## Acceptance Criteria
1. "리뷰 작성" button visible on booking detail page (only after check-out date)
2. Review form includes: star rating (1-5 stars), review text (min 10 characters, max 500)
3. Star rating is required, review text is required
4. User can only write one review per booking
5. After submission, review status = PUBLISHED
6. Review appears on property detail page within 1 minute
7. Cannot edit review after submission (MVP limitation - edit feature in future)
8. Form validation with Korean error messages
9. Success toast: "리뷰가 등록되었습니다"
10. All UI in Korean

## Tasks
- [ ] Add review button to completed bookings
- [ ] Create review form page: `src/app/bookings/[id]/review/page.tsx`
- [ ] Create StarRating component (interactive)
- [ ] Create review text area with character counter
- [ ] Validate: star rating 1-5, text 10-500 chars
- [ ] Create Server Action: submitReview(bookingId, rating, text)
- [ ] Check if review already exists for booking
- [ ] Save review to database with status = PUBLISHED
- [ ] Link review to booking and property
- [ ] Show success toast and redirect to booking detail
- [ ] Testing: form validation, submission, duplicate prevention

## Dev Notes
**Database Model:**
```prisma
model Review {
  id         String   @id @default(cuid())
  bookingId  String   @unique
  propertyId String
  guestId    String
  rating     Int      // 1-5
  text       String
  status     ReviewStatus @default(PUBLISHED)
  createdAt  DateTime @default(now())

  booking    Booking  @relation(fields: [bookingId], references: [id])
  property   Property @relation(fields: [propertyId], references: [id])
  guest      User     @relation(fields: [guestId], references: [id])
  hostResponse HostResponse?
}

enum ReviewStatus {
  PUBLISHED
  HIDDEN
}
```

**Validation:**
```typescript
const reviewSchema = z.object({
  rating: z.number().int().min(1).max(5),
  text: z.string().min(10, '최소 10자 이상 입력해주세요').max(500, '최대 500자까지 입력 가능합니다')
});
```

**Korean Labels:** "리뷰 작성", "별점", "후기 내용", "리뷰 등록"

## Change Log
| Date | Version | Author |
|------|---------|--------|
| 2025-10-27 | 1.0 | John (PM) |

## Priority: P1 (High) | Story Points: 5 | Epic: Epic 5
