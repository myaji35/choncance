# Story 4.3: Automatic Price Calculation

## Status
Ready for Implementation

## Story
**As a** guest booking a property,
**I want** to see a clear breakdown of the total cost,
**so that** I understand what I'm paying for before completing the booking.

## Acceptance Criteria
1. Price breakdown shows: accommodation cost, experience costs, service fee, total
2. Accommodation cost = nights × (weekday/weekend price)
3. Weekday price applies to Mon-Thu, weekend price to Fri-Sun
4. Experience costs = sum of selected experience prices × guest count (if applicable)
5. Service fee = 10% of (accommodation + experiences)
6. All prices display in Korean Won (₩) with thousand separators
7. Price updates in real-time when dates or experiences change
8. Responsive price summary card (sticky on desktop)
9. All labels in Korean

## Tasks
- [ ] Create PriceBreakdown component
- [ ] Calculate nights between check-in and check-out
- [ ] Determine weekday vs weekend nights
- [ ] Calculate accommodation cost using appropriate rates
- [ ] Calculate experience costs based on selections
- [ ] Calculate 10% service fee
- [ ] Format currency with Intl.NumberFormat('ko-KR')
- [ ] Make price card sticky on scroll (desktop)
- [ ] Update prices reactively when form changes
- [ ] Testing: weekday/weekend calculation, experience pricing, formatting

## Dev Notes
**Price Calculation Logic:**
```typescript
const calculatePrice = (checkIn: Date, checkOut: Date, property: Property, experiences: string[]) => {
  const nights = differenceInDays(checkOut, checkIn);
  let accommodationCost = 0;

  for (let i = 0; i < nights; i++) {
    const currentDate = addDays(checkIn, i);
    const isWeekend = [5, 6, 0].includes(getDay(currentDate)); // Fri, Sat, Sun
    accommodationCost += isWeekend ? property.weekendPrice : property.weekdayPrice;
  }

  const experienceCost = experiences.reduce((sum, expId) => {
    const exp = property.experiences.find(e => e.id === expId);
    return sum + (exp?.price || 0);
  }, 0);

  const serviceFee = Math.round((accommodationCost + experienceCost) * 0.1);
  const total = accommodationCost + experienceCost + serviceFee;

  return { accommodationCost, experienceCost, serviceFee, total };
};
```

**Korean Labels:** "숙박비", "체험비", "서비스 수수료", "총 결제 금액"

## Change Log
| Date | Version | Author |
|------|---------|--------|
| 2025-10-27 | 1.0 | John (PM) |

## Priority: P0 | Story Points: 3 | Epic: Epic 4
