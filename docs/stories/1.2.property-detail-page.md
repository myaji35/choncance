# Story 1.2: Story-Centric Property Detail Page

## Status
Ready for Review

## Story
**As a** MZ generation traveler interested in authentic rural experiences,
**I want** to view a detailed property page with the host's story and experience information,
**so that** I can understand the unique narrative and authentic character of the property before making a booking decision.

## Acceptance Criteria
1. The `/property/[id]` page displays comprehensive property information including images, title, location, and detailed description
2. A dedicated "호스트 이야기" (Host Story) section prominently displays the host's personal narrative (e.g., why they created this space, village history, their journey)
3. An "체험 정보" (Experience Information) section clearly lists available activities (e.g., 텃밭 채소 수확, 전통주 빚기) and provided items (e.g., 몸빼바지, 고무신 대여)
4. A "솔직한 안내" (Honest Guide) section transparently communicates potential inconveniences (e.g., unstable WiFi, bugs, no heating) framed as part of the authentic analog experience
5. Display relevant tags (e.g., #반려동물동반, #아궁이체험) associated with the property
6. Include a prominent "예약하기" (Book Now) button that links to a booking page placeholder
7. All content is in Korean and follows the minimalist, story-centric design philosophy with ample whitespace
8. The page is fully responsive across mobile, tablet, and desktop devices
9. Images are optimized using Next.js Image component with proper aspect ratios

## Tasks / Subtasks

- [x] **Task 1**: Extend mock data with detailed property information (AC: 1, 2, 3, 4, 5)
  - [x] Update `Property` type in `src/types/index.ts` to include:
    - `hostStory: string` (long-form narrative)
    - `experiences: Experience[]` (array of activity objects)
    - `providedItems: string[]` (e.g., "몸빼바지 대여", "고무신 제공")
    - `honestGuide: string[]` (array of honest inconvenience descriptions)
    - `images: string[]` (multiple property images)
    - `pricePerNight: number`
  - [x] Create `Experience` type with `id`, `title`, `description`, `iconName` fields
  - [x] Update mock data in `src/lib/mock-data.ts` with at least 2 fully detailed properties

- [x] **Task 2**: Create PropertyGallery component (AC: 1, 9)
  - [x] Create `src/components/property/property-gallery.tsx` as client component
  - [x] Display main hero image with `next/image` (fill mode, aspect ratio 16:9)
  - [x] Show thumbnail grid of additional images (max 4-5 thumbnails)
  - [x] Make thumbnails clickable to change main image
  - [x] Ensure responsive layout (single column mobile, grid on desktop)
  - [x] Use CSS variables for border radius and shadows

- [x] **Task 3**: Create HostStory component (AC: 2, 7)
  - [x] Create `src/components/property/host-story.tsx` as server component
  - [x] Accept `hostStory: string` prop
  - [x] Render with heading "호스트 이야기"
  - [x] Display story text with comfortable line height and paragraph spacing
  - [x] Use serif or lyrical font for story content if available
  - [x] Apply ample whitespace (padding, margins) per minimalist design

- [x] **Task 4**: Create ExperienceInfo component (AC: 3, 7)
  - [x] Create `src/components/property/experience-info.tsx` as server component
  - [x] Accept `experiences: Experience[]` and `providedItems: string[]` props
  - [x] Render heading "체험 정보"
  - [x] Display each experience with icon (from lucide-react), title, and description
  - [x] List provided items with checkmark icons
  - [x] Use Card or subtle background to group information

- [x] **Task 5**: Create HonestGuide component (AC: 4, 7)
  - [x] Create `src/components/property/honest-guide.tsx` as server component
  - [x] Accept `honestGuide: string[]` prop
  - [x] Render heading "솔직한 안내"
  - [x] Display each inconvenience with gentle warning icon
  - [x] Frame language positively (e.g., "완벽한 디지털 단절을 위해 와이파이가 불안정할 수 있습니다")
  - [x] Use muted color scheme (not alarming red, but soft amber/neutral)

- [x] **Task 6**: Create PropertyTags component (AC: 5)
  - [x] Create `src/components/property/property-tags.tsx` as server component
  - [x] Accept `tags: string[]` prop
  - [x] Render tags as pills/badges with Korean hashtag text
  - [x] Style with subtle border and neutral background
  - [x] Make tags wrap responsively

- [x] **Task 7**: Build complete PropertyDetailPage (AC: 1, 6, 7, 8)
  - [x] Update `src/app/property/[id]/page.tsx` as server component
  - [x] Fetch property data from mock data by id (handle not found with notFound())
  - [x] Implement page layout structure:
    - PropertyGallery at top
    - Property title and location
    - PropertyTags
    - HostStory section
    - ExperienceInfo section
    - HonestGuide section
    - Booking sidebar (desktop) or bottom CTA (mobile) with price and "예약하기" button
  - [x] Create sticky booking CTA on mobile that appears at bottom
  - [x] Link "예약하기" button to `/booking/[id]` placeholder page
  - [x] Ensure all spacing follows minimalist design with generous whitespace

- [x] **Task 8**: Create booking placeholder page (AC: 6)
  - [x] Create `src/app/booking/[id]/page.tsx` as dynamic route
  - [x] Display "예약 페이지 준비 중" message
  - [x] Show selected property title and price
  - [x] Include back link to property detail page

- [x] **Task 9**: Testing (AC: 8, 9)
  - [x] Test navigation from `/explore` → `/property/[id]` → `/booking/[id]`
  - [x] Verify all sections render with mock data
  - [x] Test responsive layout at 375px, 768px, 1024px, 1440px
  - [x] Confirm images load optimized with next/image
  - [x] Verify Korean text rendering and typography
  - [x] Test with multiple properties (at least 2 different IDs)
  - [x] Check whitespace and minimalist aesthetic alignment
  - [x] Run `npm run lint` and resolve all issues

## Dev Notes

### Source Tree Information
[Source: docs/architecture/source-tree.md#components]

**New Component Files:**
- `src/components/property/property-gallery.tsx` (client component)
- `src/components/property/host-story.tsx` (server component)
- `src/components/property/experience-info.tsx` (server component)
- `src/components/property/honest-guide.tsx` (server component)
- `src/components/property/property-tags.tsx` (server component)

**New Page Files:**
- `src/app/property/[id]/page.tsx` (update from Story 1.1 placeholder)
- `src/app/booking/[id]/page.tsx` (new dynamic route)

**Updated Files:**
- `src/types/index.ts` (extend Property type)
- `src/lib/mock-data.ts` (add detailed property data)

### Tech Stack Requirements
[Source: docs/architecture/tech-stack.md]

**Framework:**
- Use Server Components for all static content (HostStory, ExperienceInfo, HonestGuide, PropertyTags)
- Use Client Component only for PropertyGallery (image interaction state)
- Dynamic route with Next.js App Router: `/property/[id]`
- Use `notFound()` from `next/navigation` for invalid property IDs

**Styling:**
- Tailwind CSS utility classes
- shadcn/ui Card for experience info and sections
- Badge/Tag component from shadcn/ui for property tags (or custom with Tailwind)
- Use lucide-react icons for experiences and honest guide

**Image Optimization:**
- `next/image` with priority for hero image
- Specify aspect ratio to prevent layout shift
- Use placeholder="blur" if static images available

### Coding Standards
[Source: docs/architecture/coding-standards.md]

**Component Patterns:**
```typescript
// Server Component (default)
interface HostStoryProps {
  hostStory: string;
}

export function HostStory({ hostStory }: HostStoryProps) {
  return (
    <section className="space-y-4">
      <h2 className="text-2xl font-bold">호스트 이야기</h2>
      <p className="text-gray-700 leading-relaxed">{hostStory}</p>
    </section>
  );
}

// Client Component (for interactions)
"use client";

import { useState } from "react";

interface PropertyGalleryProps {
  images: string[];
}

export function PropertyGallery({ images }: PropertyGalleryProps) {
  const [selectedImage, setSelectedImage] = useState(0);
  // ... implementation
}
```

**Error Handling:**
```typescript
// In page.tsx
import { notFound } from "next/navigation";

export default async function PropertyDetailPage({
  params
}: {
  params: { id: string }
}) {
  const property = getPropertyById(params.id);

  if (!property) {
    notFound(); // Triggers Next.js 404 page
  }

  return <div>...</div>;
}
```

**Korean Text Standards:**
- Section headings: "호스트 이야기", "체험 정보", "솔직한 안내"
- Button text: "예약하기"
- Placeholder text: "예약 페이지 준비 중"
- Use formal polite Korean throughout

### Design Philosophy
[Source: PRD.md Section 2 & 5]

**Story-Centric Approach (F-02 Core Requirement):**
- Host story is NOT an afterthought - it's a primary section
- Prioritize narrative over specifications
- Use storytelling to build emotional connection
- Emphasize authenticity and human connection

**"Slow and Inconvenient" as Value:**
- Don't hide inconveniences - frame them as features
- Example: "와이파이 불안정 → 완벽한 디지털 단절"
- Use gentle, positive language, not warnings
- Position analog/slow experience as premium, not lacking

**Minimalist UI:**
- Generous whitespace between sections (space-y-8 or space-y-12)
- Restrained color palette - mostly neutral with accent colors
- Serif or lyrical typography for story content
- Clean section separators (subtle borders or whitespace)

**Visual Hierarchy:**
1. Hero image (largest visual element)
2. Property title and key info
3. Host story (prominent, well-spaced)
4. Experiences and provided items
5. Honest guide
6. Booking CTA

### Mock Data Requirements

**Extended Property Interface:**
```typescript
interface Experience {
  id: string;
  title: string;
  description: string;
  iconName: string; // lucide-react icon name
}

interface Property {
  id: string;
  title: string;
  location: string;
  description: string; // short description for cards
  imageUrl: string; // primary image
  images: string[]; // gallery images (3-5 images)
  themeIds: string[];
  tags: string[]; // e.g., "#반려동물동반", "#아궁이체험"
  hostStory: string; // long-form narrative (2-3 paragraphs)
  experiences: Experience[]; // 2-4 experiences
  providedItems: string[]; // e.g., "몸빼바지 대여", "고무신 제공"
  honestGuide: string[]; // 2-3 honest inconveniences
  pricePerNight: number;
}
```

**Example Mock Data:**
```typescript
{
  id: "1",
  title: "산골 한옥 스테이",
  hostStory: "서울에서 30년 직장 생활을 하다가 고향인 이곳으로 돌아와 할머니의 한옥을 고쳐 게스트하우스를 시작했습니다. 어릴 적 뛰놀던 마당, 할머니가 가꾸시던 텃밭이 그대로 남아있어요. 이곳에서 느린 시간을 보내시길 바랍니다.",
  experiences: [
    {
      id: "exp1",
      title: "텃밭 채소 수확",
      description: "계절마다 제철 채소를 직접 수확하실 수 있습니다",
      iconName: "Sprout"
    }
  ],
  providedItems: ["몸빼바지 대여", "고무신 제공", "농기구 사용"],
  honestGuide: [
    "완벽한 디지털 단절을 위해 와이파이가 불안정할 수 있습니다",
    "자연과 함께하는 공간이라 벌레가 나올 수 있습니다",
    "전통 난방 방식으로 겨울철 적응 시간이 필요합니다"
  ],
  pricePerNight: 150000
}
```

### Responsive Layout Strategy

**Mobile (< 768px):**
- Single column layout
- Full-width gallery
- Stacked sections
- Bottom sticky booking CTA bar

**Tablet (768px - 1024px):**
- Two-column grid for experiences
- Gallery with larger thumbnails
- Side-by-side for some content

**Desktop (> 1024px):**
- Sidebar layout with sticky booking card on right
- Main content (gallery, story, experiences) on left (2/3 width)
- Booking card on right (1/3 width, sticky position)
- Grid layout for experiences (2 columns)

### Component Organization

```
src/components/property/
├── property-card.tsx (from Story 1.1)
├── property-gallery.tsx (NEW - client component)
├── host-story.tsx (NEW)
├── experience-info.tsx (NEW)
├── honest-guide.tsx (NEW)
└── property-tags.tsx (NEW)
```

### Testing

**Manual Testing Scenarios:**
1. Navigate from explore page to property detail
2. Click through gallery images
3. Verify all sections render with Korean text
4. Click "예약하기" button → navigates to booking placeholder
5. Test responsive behavior at each breakpoint
6. Verify images load optimized (check Network tab)
7. Test with different property IDs
8. Test 404 handling with invalid property ID

**Visual Checks:**
- Story section has comfortable reading width (max-w-prose)
- Generous spacing between sections
- Images load without layout shift
- Korean typography is clear and readable
- Whitespace conveys "slow" aesthetic

**Linting:**
- Run `npm run lint` before completion
- Fix all TypeScript errors
- Resolve any ESLint warnings

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-22 | 1.0 | Initial story creation for F-02 Story-Centric Detail Page | Bob (Scrum Master) |
| 2025-10-22 | 1.1 | Story implementation completed - all ACs met | James (Developer) |

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)

### Debug Log References
No critical issues encountered during development.

### Completion Notes List

- All 9 tasks completed successfully
- Extended Property and Experience types with detailed fields (hostStory, experiences, providedItems, honestGuide, pricePerNight)
- Created 2 fully detailed mock properties (ID 1: 황금들녘 한옥 스테이, ID 5: 별빛 캠핑 하우스) with complete Korean narratives
- Built 5 new components:
  - PropertyGallery (client component with image state management)
  - HostStory (server component with paragraph splitting for readability)
  - ExperienceInfo (server component with dynamic lucide-react icons)
  - HonestGuide (server component with amber color scheme)
  - PropertyTags (server component with pill/badge styling)
- Completely rewrote /property/[id] page with story-centric layout
- Implemented responsive design: desktop sidebar + mobile sticky bottom CTA
- Created comprehensive booking placeholder page with "coming soon" features
- Fixed TypeScript any type error in ExperienceInfo component (used proper Record type)
- All ESLint checks passed with zero warnings or errors
- Story-centric design philosophy successfully implemented with generous whitespace (space-y-12 between sections)
- Korean language throughout with proper formal polite form (존댓말)
- "Slow and inconvenient" framed positively in HonestGuide component

### File List

**New Files Created:**
- src/components/property/property-gallery.tsx
- src/components/property/host-story.tsx
- src/components/property/experience-info.tsx
- src/components/property/honest-guide.tsx
- src/components/property/property-tags.tsx
- src/app/booking/[id]/page.tsx

**Modified Files:**
- src/types/index.ts (extended Property interface, reordered Experience interface)
- src/lib/mock-data.ts (added detailed property data for properties 1 and 5)
- src/app/property/[id]/page.tsx (completely rewritten with all story-centric sections)

## QA Results

### QA Date: 2025-10-22
### QA Agent: Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)
### Status: ✅ PASSED - All Acceptance Criteria Met

#### Acceptance Criteria Test Results:

**AC1: Comprehensive property information displayed** ✅ PASS
- Verified: PropertyGallery with multiple images (aspect-video, fill mode)
- Verified: Title and location properly rendered
- Verified: Description section with "소개" heading
- Verified: All sections properly structured with semantic HTML
- Implementation: `src/app/property/[id]/page.tsx:43-72`

**AC2: "호스트 이야기" section prominently displays narrative** ✅ PASS
- Verified: Heading "호스트 이야기" rendered
- Verified: Paragraph splitting on `\n\n` for readability
- Verified: Prose styling with leading-relaxed
- Verified: Story content properly formatted for long-form reading
- Implementation: `src/components/property/host-story.tsx:12-18`

**AC3: "체험 정보" section lists activities and items** ✅ PASS
- Verified: Heading "체험 정보" displayed
- Verified: Dynamic lucide-react icon loading (Record type for type safety)
- Verified: Responsive grid layout (md:grid-cols-2)
- Verified: Provided items section with checkmark icons
- Verified: Card components for visual grouping
- Implementation: `src/components/property/experience-info.tsx:18-63`

**AC4: "솔직한 안내" section with positive framing** ✅ PASS
- Verified: Heading "솔직한 안내" rendered
- Verified: Amber color scheme (border-amber-200, bg-amber-50, text-amber-600)
- Verified: Info icon with gentle styling (not alarming)
- Verified: Language frames inconveniences positively (e.g., "완벽한 디지털 단절을 위해...")
- Implementation: `src/components/property/honest-guide.tsx:14-28`

**AC5: Property tags displayed** ✅ PASS
- Verified: PropertyTags component renders hashtag format
- Verified: Pill-style badges with border and neutral background
- Verified: Flex-wrap for responsive layout
- Implementation: `src/components/property/property-tags.tsx:11-19`

**AC6: "예약하기" button links to booking placeholder** ✅ PASS
- Verified: Desktop booking sidebar with "예약하기" button (line 89-93)
- Verified: Mobile sticky bottom CTA with "예약하기" button (line 113-115)
- Verified: Both link to `/booking/${property.id}`
- Verified: Booking placeholder page exists and renders correctly
- Implementation: `src/app/property/[id]/page.tsx:89,113` + `src/app/booking/[id]/page.tsx`

**AC7: Korean content with minimalist design** ✅ PASS
- Verified: All section headings in Korean ("호스트 이야기", "체험 정보", "솔직한 안내", "소개")
- Verified: Button text in Korean ("예약하기", "탐색으로 돌아가기")
- Verified: Generous whitespace (space-y-12 between major sections)
- Verified: Clean typography with proper hierarchy (text-2xl, text-3xl, text-4xl)
- Verified: Minimalist aesthetic maintained throughout

**AC8: Fully responsive across all devices** ✅ PASS
- Verified: Desktop layout (>1024px): 2/3 main content + 1/3 sticky sidebar
- Verified: Desktop sticky booking card (lg:sticky lg:top-8)
- Verified: Mobile layout (<768px): Single column with sticky bottom CTA
- Verified: Grid system: grid-cols-1 lg:grid-cols-3
- Verified: Mobile CTA with padding spacer at bottom (h-20 lg:hidden)
- Implementation: `src/app/property/[id]/page.tsx:39-120`

**AC9: Images optimized with next/image** ✅ PASS
- Verified: Main image uses aspect-video with fill mode
- Verified: Priority loading for hero image (line 27)
- Verified: Thumbnails use aspect-video (line 41)
- Verified: Proper sizes attribute for responsive loading (lines 29, 52)
- Verified: No layout shift (aspect ratios prevent CLS)
- Implementation: `src/components/property/property-gallery.tsx:22-53`

#### Code Quality Review:

**TypeScript Types:** ✅ PASS
- Experience interface properly defined with iconName field
- Property interface extended with all Story 1.2 fields
- No `any` types (fixed Record<string, React.ComponentType> in ExperienceInfo)
- Explicit prop interfaces for all 5 new components

**Component Architecture:** ✅ PASS
- Server Components used by default (HostStory, ExperienceInfo, HonestGuide, PropertyTags)
- Client Component only for PropertyGallery (image state management)
- Proper separation of concerns (5 focused components)
- Clean composition in main page component

**Image Optimization:** ✅ PASS
- next/image used throughout gallery
- Priority loading for above-the-fold hero image
- Proper sizes attribute matches responsive layout
- aspect-video prevents layout shift
- Interactive thumbnail selection with visual feedback

**Accessibility:** ✅ PASS
- Semantic HTML (section, h1, h2)
- Proper heading hierarchy maintained
- Alt text with descriptive Korean text
- Keyboard navigation support
- Color contrast meets WCAG standards

**Performance:** ✅ PASS
- Server-side rendering for all static content
- Client-side state only where needed (gallery)
- Optimized images with responsive sizes
- Lazy loading for non-priority images
- Minimal JavaScript bundle

**Story-Centric Design Philosophy:** ✅ PASS
- Host story is prominent, not an afterthought
- Narrative prioritized over specifications
- "Slow and inconvenient" framed positively
- Emotional connection emphasized
- Authentic Korean storytelling tone

#### Navigation Flow Test:

**Test Path: `/explore` → `/property/1` → `/booking/1` → back**
- ✅ PASS: PropertyCard links to /property/1
- ✅ PASS: Property detail page loads with full story data
- ✅ PASS: Gallery interaction works (thumbnail selection)
- ✅ PASS: "예약하기" button navigates to /booking/1
- ✅ PASS: Booking placeholder displays property info
- ✅ PASS: Back navigation works correctly

**Test Path: `/explore` → `/property/5` → `/booking/5`**
- ✅ PASS: Second property (별빛 캠핑 하우스) loads correctly
- ✅ PASS: Different story content renders properly
- ✅ PASS: All sections populate with property-specific data

#### Browser Compatibility:

**Responsive Testing:**
- ✅ Mobile (375px): Single column, sticky bottom CTA, readable text
- ✅ Tablet (768px): Improved spacing, 2-column experience grid
- ✅ Desktop (1024px+): Sidebar layout, sticky booking card, optimal reading width
- ✅ Korean text renders clearly at all sizes with proper line-height

**Component Behavior:**
- ✅ PropertyGallery: Thumbnail selection works on all screen sizes
- ✅ HostStory: Paragraph breaks render correctly
- ✅ ExperienceInfo: Icons load dynamically without errors
- ✅ HonestGuide: Amber styling conveys gentle tone
- ✅ PropertyTags: Tags wrap properly on narrow screens

#### Mock Data Quality:

**Property 1 (황금들녘 한옥 스테이):** ✅ PASS
- Complete hostStory with authentic Korean narrative
- 3 experiences with proper iconNames
- 4 provided items
- 3 honest guide entries
- All Korean text uses formal polite form

**Property 5 (별빛 캠핑 하우스):** ✅ PASS
- Complete hostStory with different narrative style
- 2 experiences with different iconNames
- 3 provided items
- 3 honest guide entries
- Consistent Korean language quality

#### Linting:

**ESLint Results:** ✅ PASS
- Fixed TypeScript `any` type error in ExperienceInfo component
- Used proper Record<string, React.ComponentType<{ className?: string }>> type
- Zero warnings or errors
- TypeScript strict mode compliance
- All imports properly ordered

#### Overall Assessment:

**Status: APPROVED FOR PRODUCTION** ✅

All 9 acceptance criteria met with exceptional quality. Story-centric design philosophy successfully implemented. Code is clean, well-structured, and follows all coding standards. No blockers identified. Story 1.2 implementation is complete and ready for deployment.

**Highlights:**
1. Exceptional Korean storytelling content that aligns with brand values
2. Thoughtful "slow and inconvenient" positive framing in HonestGuide
3. Clean component architecture with proper Server/Client split
4. Excellent responsive design (desktop sidebar + mobile sticky CTA)
5. Type-safe dynamic icon loading solution

**Recommendations:**
1. Replace placeholder images with real property photos
2. Consider adding image loading skeletons for better perceived performance
3. Add meta tags for social sharing (Open Graph, Twitter Cards)
4. Consider adding a favorites/bookmark feature in future stories
