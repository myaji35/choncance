# Story 3.2: Property Registration (Multi-Step Form)

## Status
Ready for Implementation

## Story
**As a** verified host on ChonCance,
**I want** to register a new property through a guided multi-step form,
**so that** I can list my rural accommodation and attract guests.

## Acceptance Criteria
1. The property registration form has 8 sequential steps as defined in PRD (FR-14)
2. Step 1: Basic Information (property name, type, location, address) - all fields required
3. Step 2: Amenities selection with checkboxes (Wi-Fi, Parking, Cooking, BBQ, etc.)
4. Step 3: Photo upload (minimum 3, maximum 20 images, drag-and-drop ordering)
5. Step 4: Host story text editor (rich text, minimum 50 characters)
6. Step 5: Theme tag selection (multi-select from predefined tags)
7. Step 6: Pricing setup (weekday/weekend prices, per night)
8. Step 7: Optional inconveniences (honest disclosure: "Wi-Fi unstable", etc.)
9. Step 8: Optional experiences (add activities with name, description, price)
10. Form shows progress indicator (Step X of 8)
11. Each step has "Previous" and "Next" buttons (except first/last steps)
12. Final step shows summary and "Submit for Review" button
13. After submission, property status = "PENDING" and awaits admin approval
14. All validation errors display in Korean with clear messages
15. Form data is saved to draft if user navigates away (localStorage)

## Tasks / Subtasks

- [ ] **Task 1**: Create multi-step form infrastructure (AC: 1, 10, 11)
  - [ ] Create `src/app/host/properties/new/page.tsx`
  - [ ] Implement step navigation state with React useState
  - [ ] Create ProgressIndicator component showing current step
  - [ ] Create StepNavigation component (Previous/Next/Submit buttons)
  - [ ] Add form context using React Context or react-hook-form

- [ ] **Task 2**: Implement Step 1 - Basic Information (AC: 2)
  - [ ] Create `src/components/host/registration/step-1-basic-info.tsx`
  - [ ] Fields: property name (텍스트), type (select: 한옥/펜션/농가/글램핑), location (시/도 select), detailed address
  - [ ] Add Zod validation schema for Step 1
  - [ ] Integrate with react-hook-form
  - [ ] Display validation errors in Korean

- [ ] **Task 3**: Implement Step 2 - Amenities (AC: 3)
  - [ ] Create `src/components/host/registration/step-2-amenities.tsx`
  - [ ] Checkbox list: Wi-Fi, Parking, Cooking facilities, BBQ grill, Washing machine, Air conditioning, Heating, Pet-friendly
  - [ ] Group amenities by category (기본 시설, 편의 시설, 기타)
  - [ ] Allow multiple selections

- [ ] **Task 4**: Implement Step 3 - Photo Upload (AC: 4)
  - [ ] Create `src/components/host/registration/step-3-photos.tsx`
  - [ ] Integrate file upload component (shadcn/ui or react-dropzone)
  - [ ] Validate: JPG/PNG format, max 5MB per file, 3-20 images
  - [ ] Implement drag-and-drop reordering
  - [ ] Show image previews with thumbnails
  - [ ] Upload to cloud storage (Vercel Blob or Cloudinary)
  - [ ] Store image URLs in form state

- [ ] **Task 5**: Implement Step 4 - Host Story (AC: 5)
  - [ ] Create `src/components/host/registration/step-4-story.tsx`
  - [ ] Integrate rich text editor (Tiptap or react-quill)
  - [ ] Set minimum character count: 50 characters
  - [ ] Add character counter display
  - [ ] Provide writing prompts: "이 공간의 매력을 소개해주세요", "게스트가 경험할 수 있는 것은?"

- [ ] **Task 6**: Implement Step 5 - Theme Tags (AC: 6)
  - [ ] Create `src/components/host/registration/step-5-tags.tsx`
  - [ ] Fetch available tags from database
  - [ ] Display as checkbox grid with tag names and icons
  - [ ] Allow multiple tag selection (min 1, max 5)
  - [ ] Tags: #논뷰맛집, #불멍과별멍, #반려동물동반, #아궁이체험, #계곡앞, #전통가옥, etc.

- [ ] **Task 7**: Implement Step 6 - Pricing (AC: 7)
  - [ ] Create `src/components/host/registration/step-6-pricing.tsx`
  - [ ] Input fields: weekday price (평일 1박), weekend price (주말 1박)
  - [ ] Number input with currency formatting (₩ symbol)
  - [ ] Optional: Different pricing for peak seasons (future feature)
  - [ ] Validation: price > 0, max 10,000,000원

- [ ] **Task 8**: Implement Step 7 - Inconveniences (AC: 8)
  - [ ] Create `src/components/host/registration/step-7-inconveniences.tsx`
  - [ ] Checkbox list of common inconveniences (optional)
  - [ ] Options: "Wi-Fi 불안정", "온수 부족 가능", "벌레 출현 가능", "소음 (동물/자연)", "접근성 불편 (비포장 도로)"
  - [ ] Add custom text input for additional notes
  - [ ] Emphasize honesty in UI: "솔직한 표현이 신뢰를 만듭니다"

- [ ] **Task 9**: Implement Step 8 - Experiences (AC: 9, 12)
  - [ ] Create `src/components/host/registration/step-8-experiences.tsx`
  - [ ] Allow adding multiple experiences (0-5)
  - [ ] Each experience: name, description, price per person, duration
  - [ ] Show review summary of all previous steps
  - [ ] "Submit for Review" button
  - [ ] Submit creates property with status: PENDING

- [ ] **Task 10**: Backend integration and draft saving (AC: 13, 15)
  - [ ] Create Server Action: `submitProperty(formData)`
  - [ ] Save property to database with status = PENDING
  - [ ] Save draft to localStorage on each step change
  - [ ] Restore draft on page reload
  - [ ] Clear draft after successful submission
  - [ ] Send notification to admin for review

- [ ] **Task 11**: Testing (AC: 14)
  - [ ] Test all 8 steps navigate correctly
  - [ ] Verify validation works for each step
  - [ ] Test photo upload and reordering
  - [ ] Test draft save/restore functionality
  - [ ] Verify form submission creates PENDING property
  - [ ] Test responsive layout on mobile
  - [ ] Verify all Korean text displays correctly

## Dev Notes

### Tech Stack
- react-hook-form with Zod validation
- shadcn/ui Form components
- Vercel Blob for image storage
- Tiptap for rich text editor
- React DnD or dnd-kit for photo reordering

### Korean Labels
- "숙소 등록", "기본 정보", "편의시설", "사진 업로드", "호스트 스토리", "테마 태그", "가격 설정", "불편함 안내", "체험 프로그램"
- "이전", "다음", "검토 요청"

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-27 | 1.0 | Initial story for property registration | John (PM) |

## Priority
P0 (Critical)

## Story Points
13

## Epic
Epic 3: Host and Property Management
