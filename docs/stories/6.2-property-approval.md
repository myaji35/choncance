# Story 6.2: Property Listing Review and Approval

## Status
Ready for Implementation

## Story
**As an** admin,
**I want** to review property listings before they go live,
**so that** I can ensure quality standards and prevent inappropriate content.

## Acceptance Criteria
1. Admin dashboard shows pending property listings (status = PENDING)
2. Each listing card shows: thumbnail, property name, host name, submission date
3. Click opens property preview (full detail view)
4. Preview shows all property information as guests would see it
5. Admin can approve, reject, or request modifications
6. Rejection/modification request requires reason (min 20 characters)
7. On approval: property.status = APPROVED, visible to guests, host notified
8. On rejection: property.status = REJECTED, host receives reason via email
9. Properties filterable by status: PENDING, APPROVED, REJECTED
10. All admin UI in Korean

## Tasks
- [ ] Create admin route: `src/app/admin/properties/page.tsx`
- [ ] List pending properties with host information
- [ ] Create PropertyReviewCard component
- [ ] Create preview page: `/admin/properties/[id]/preview`
- [ ] Display property as it would appear to guests
- [ ] Add admin action panel: Approve, Reject, Request Changes
- [ ] Create rejection/modification modal with reason input
- [ ] Create Server Actions: approveProperty(id), rejectProperty(id, reason)
- [ ] Update property status in database
- [ ] Send email notifications to hosts
- [ ] Add status filter tabs
- [ ] Testing: approval/rejection flows, email delivery, status updates

## Dev Notes
**Property Approval Logic:**
```typescript
async function approveProperty(propertyId: string) {
  const property = await prisma.property.update({
    where: { id: propertyId },
    data: {
      status: 'APPROVED',
      approvedAt: new Date(),
      approvedBy: adminUserId
    },
    include: {
      host: { select: { email: true, name: true } }
    }
  });

  await sendEmail({
    to: property.host.email,
    subject: '숙소 등록 승인 완료',
    template: 'property-approved',
    data: { propertyName: property.name }
  });
}
```

**Quality Checklist (Admin Reference):**
- [ ] High-quality photos (min 3)
- [ ] Complete property description
- [ ] Appropriate tags selected
- [ ] Pricing is reasonable
- [ ] No inappropriate content
- [ ] Contact info provided

**Korean Labels:** "숙소 승인 관리", "승인 대기 중", "숙소 검토", "수정 요청"

## Change Log
| Date | Version | Author |
|------|---------|--------|
| 2025-10-27 | 1.0 | John (PM) |

## Priority: P0 (Critical) | Story Points: 5 | Epic: Admin Features
