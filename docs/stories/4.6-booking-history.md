# Story 4.6: Booking History View

## Status
Ready for Implementation

## Story
**As a** registered guest,
**I want** to view my past and upcoming bookings,
**so that** I can track my travel plans and reference previous stays.

## Acceptance Criteria
1. `/bookings` page accessible from user menu
2. Bookings displayed in tabs: "예정", "완료", "취소됨"
3. Each booking card shows: property image, name, dates, status badge, total amount
4. Bookings sorted by check-in date (upcoming first, then past in reverse chronological)
5. Click on booking navigates to detail page: `/bookings/[id]`
6. Detail page shows: full booking info, payment receipt, cancellation option (if applicable)
7. Empty state for users with no bookings: "아직 예약 내역이 없습니다"
8. All UI in Korean
9. Responsive layout

## Tasks
- [ ] Create bookings list page: `src/app/bookings/page.tsx`
- [ ] Implement tab navigation: Upcoming, Completed, Cancelled
- [ ] Create BookingCard component
- [ ] Fetch bookings: GET /api/bookings (Server Action)
- [ ] Filter bookings by status and date
- [ ] Create booking detail page: `src/app/bookings/[id]/page.tsx`
- [ ] Display payment receipt with breakdown
- [ ] Add cancel button for upcoming bookings (links to 4.7)
- [ ] Handle empty states
- [ ] Testing: tabs, filtering, detail view, responsive layout

## Dev Notes
**Database Query:**
```typescript
const bookings = await prisma.booking.findMany({
  where: { guestId: userId },
  include: {
    property: {
      select: { id: true, name: true, images: true, location: true }
    },
    payment: { select: { amount: true, method: true, paidAt: true } }
  },
  orderBy: { checkIn: 'desc' }
});

// Categorize
const upcoming = bookings.filter(b => b.checkIn > new Date() && b.status === 'CONFIRMED');
const completed = bookings.filter(b => b.checkOut < new Date() && b.status === 'COMPLETED');
const cancelled = bookings.filter(b => b.status.includes('CANCELLED'));
```

**Korean Labels:** "예약 내역", "예정", "완료", "취소됨", "결제 영수증"

## Change Log
| Date | Version | Author |
|------|---------|--------|
| 2025-10-27 | 1.0 | John (PM) |

## Priority: P0 | Story Points: 3 | Epic: Epic 4
